import query from '../controllers/DB/database';import PostModel from './post.model';interface deleteInter {    affectedRows: number;}interface addToDbInter {    affectedRows: number;    insertId: number;}interface newMessageInter {    ID: number;    post_id: number;    type: string;    reply_id: number;    user_id: number;}export default class NewMessageModel {    // 获取基本信息    static async getBasic(messageId: number) {        const sql = `SELECT A.* FROM new_message WHERE ID = messageId`;        const row = await query(sql, [            messageId        ]).catch((err) => {            console.log(err)        })        return row;    }    // 添加新消息(回复)    static async addOne(type: string, userId: number, postUserId, postId: number, replyId: number, subReplyId: number) {        if (postUserId === userId) return true;        const sql = `INSERT INTO new_message         (type, post_id, reply_id, user_id, sub_reply_id)         VALUES (?, ?, ?, ?, ?)        `;        const row = await query(sql, [            type,            postId,            replyId,            postUserId,            subReplyId        ]).catch((err) => {            console.log(err)        })        if ((<addToDbInter>row).affectedRows === 1) {            return true;        } else {            return false;        }    }    // 获取当前用户的未读列表    static async getList(userId: number) {        const sql = `SELECT A.* FROM new_message AS A WHERE A.user_id = ?`;        const row = await query(sql, [            userId        ]).catch((err) => {            console.log(err)        })        return row;    }    // 已阅    static async deleteOne(messageId: number) {        const messageList = await this.getBasic(messageId);        if ((<newMessageInter[]>messageList).length !== 0) {            const sql = `DELETE FROM new_message WHERE ID = ?`;            const row = await query(sql, [                messageId            ]).catch((err) => {                console.log(err)            })            if ((<deleteInter>row).affectedRows !== 0) {                return true;            } else {                return false;            }        } else {            return false;        }    }}